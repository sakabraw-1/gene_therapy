<header>
        <nav class="navbar container" aria-label="Main navigation">
                <a href="index.html" class="logo" aria-label="CDKL5 Gene Therapy home">
                        <img src="images/logos/helix_icon.svg" alt="CDKL5 helix logo" style="height:48px; width:auto;">
                        <span class="site-name">
                                <span class="site-name-top">CDKL5</span>
                                <span class="site-name-bottom">Gene Therapy</span>
                        </span>
                </a>
                
                <!-- Desktop Navigation -->
                <ul class="nav-links desktop-nav" id="main-nav">
                        <li class="nav-item-with-dropdown">
                                <a href="#" onclick="return false;" class="dropdown-toggle">About</a>
                                <ul class="dropdown-menu">
                                        <li><a href="about.html">About Us</a></li>
                                        <li><a href="about-cdkl5.html">New to CDKL5 Disorder?</a></li>
                                </ul>
                        </li>
                        <li><a href="get-involved.html">Get Involved</a></li>
                        <li><a href="frequently-asked-questions.html">FAQ</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="donate.html" class="btn btn-donate-pill">DONATE</a></li>
                </ul>
                
                <!-- Hamburger Button (Mobile Only) -->
                <button class="hamburger-btn" id="hamburger-btn" aria-label="Toggle menu" aria-expanded="false" onclick="window.toggleMobileMenu()">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                </button>
        </nav>
</header>

<!-- Mobile Full-Screen Menu -->
<div class="mobile-fullscreen-menu" id="mobile-menu">
        <div class="mobile-menu-header">
                <button class="mobile-menu-close" id="mobile-menu-close" aria-label="Close menu" onclick="window.toggleMobileMenu()">
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                </button>
        </div>
        
        <nav class="mobile-menu-nav">
                <ul class="mobile-menu-list">
                        <li><a href="index.html" class="mobile-menu-link">Home</a></li>
                        
                        <li class="mobile-menu-dropdown">
                                <a href="#" class="mobile-menu-link mobile-dropdown-toggle" id="mobile-about-toggle">
                                        About
                                        <svg class="mobile-dropdown-arrow" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                                                <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                </a>
                                <ul class="mobile-submenu">
                                        <li><a href="about.html" class="mobile-menu-link mobile-submenu-link">About Us</a></li>
                                        <li><a href="about-cdkl5.html" class="mobile-menu-link mobile-submenu-link">New to CDKL5 Disorder?</a></li>
                                </ul>
                        </li>
                        
                        <li><a href="get-involved.html" class="mobile-menu-link">Get Involved</a></li>
                        <li><a href="frequently-asked-questions.html" class="mobile-menu-link">FAQ</a></li>
                        <li><a href="contact.html" class="mobile-menu-link">Contact Us</a></li>
                </ul>
                
                <a href="donate.html" class="mobile-menu-donate-btn">DONATE NOW</a>
        </nav>
</div>

<script>
// Mobile hamburger menu functionality - ONLY ON MOBILE
window.toggleMobileMenu = function() {
        // Only work on mobile screens
        if (window.innerWidth > 900) {
                console.log('Desktop detected, ignoring mobile menu toggle');
                return;
        }
        
        console.log('toggleMobileMenu called - Mobile view'); // Debug log
        
        var mobileMenu = document.getElementById('mobile-menu');
        var hamburgerBtn = document.getElementById('hamburger-btn');
        
        console.log('mobileMenu:', mobileMenu); // Debug log
        console.log('hamburgerBtn:', hamburgerBtn); // Debug log
        
        if (mobileMenu && hamburgerBtn) {
                var isOpen = mobileMenu.classList.toggle('active');
                hamburgerBtn.classList.toggle('active');
                hamburgerBtn.setAttribute('aria-expanded', isOpen);
                document.body.style.overflow = isOpen ? 'hidden' : '';
                console.log('Menu toggled, isOpen:', isOpen); // Debug log
        } else {
                console.error('Elements not found!'); // Debug log
        }
};

// Test that function is defined
console.log('toggleMobileMenu function defined:', typeof window.toggleMobileMenu);
console.log('Current window width:', window.innerWidth);

// Initialize dropdown and link handlers after includes load
document.addEventListener('includes:loaded', function() {
        console.log('includes:loaded event fired'); // Debug log
        
        var dropdownToggle = document.getElementById('mobile-about-toggle');
        var dropdownParent = document.querySelector('.mobile-menu-dropdown');
        
        // Toggle About dropdown in mobile menu
        if (dropdownToggle && dropdownParent) {
                dropdownToggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        dropdownParent.classList.toggle('active');
                        console.log('Dropdown toggled');
                });
        }
        
        // Close menu when clicking a regular link (not dropdown toggle)
        var menuLinks = document.querySelectorAll('.mobile-menu-link:not(.mobile-dropdown-toggle)');
        menuLinks.forEach(function(link) {
                link.addEventListener('click', function() {
                        window.toggleMobileMenu();
                });
        });
        
        console.log('Mobile menu initialized, links found:', menuLinks.length);
});

// Also try to initialize immediately in case includes:loaded already fired
if (document.readyState === 'complete' || document.readyState === 'interactive') {
        setTimeout(function() {
                console.log('Immediate initialization attempt'); // Debug log
                
                var dropdownToggle = document.getElementById('mobile-about-toggle');
                var dropdownParent = document.querySelector('.mobile-menu-dropdown');
                
                if (dropdownToggle && dropdownParent && !dropdownToggle.dataset.initialized) {
                        dropdownToggle.dataset.initialized = 'true';
                        dropdownToggle.addEventListener('click', function(e) {
                                e.preventDefault();
                                dropdownParent.classList.toggle('active');
                        });
                }
                
                var menuLinks = document.querySelectorAll('.mobile-menu-link:not(.mobile-dropdown-toggle)');
                menuLinks.forEach(function(link) {
                        if (!link.dataset.initialized) {
                                link.dataset.initialized = 'true';
                                link.addEventListener('click', function() {
                                        window.toggleMobileMenu();
                                });
                        }
                });
        }, 100);
}
</script>

<!-- Structured data for important images to help search engines pick up keywords -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "ItemList",
    "itemListElement": [
        {
            "@type": "ImageObject",
            "contentUrl": "https://cdkl5genetherapy.com/images/image 1.jpg",
            "name": "LouLou — child with CDKL5",
            "description": "LouLou — child with CDKL5. CDKL5 gene therapy, CDD, rare disease research, international foundation, US, India",
            "keywords": "LouLou, CDKL5, CDD, Gene Therapy, Rare Disease, CDKL5 Research, Rare Disease Research, International, Foundation, US, India"
        },
        {
            "@type": "ImageObject",
            "contentUrl": "https://cdkl5genetherapy.com/images/image 2.jpg",
            "name": "Child smiling — CDKL5 community",
            "description": "Child in the CDKL5 community. CDKL5 gene therapy, CDD, Rare Disease Research, International Foundation",
            "keywords": "CDKL5, CDD, Gene Therapy, Rare Disease, CDKL5 Research, International, Foundation"
        },
        {
            "@type": "ImageObject",
            "contentUrl": "https://cdkl5genetherapy.com/images/image 3.jpg",
            "name": "Family support — CDKL5 caregivers",
            "description": "Family supporting a child with CDKL5. Rare disease research, CDKL5 Gene Therapy, International",
            "keywords": "Family, CDKL5, CDD, Gene Therapy, Rare Disease, International"
        },
        {
            "@type": "ImageObject",
            "contentUrl": "https://cdkl5genetherapy.com/images/image 4.jpg",
            "name": "Community gathering — CDKL5 research support",
            "description": "Community gathering supporting CDKL5 gene therapy research. US and India connections, foundation, rare disease",
            "keywords": "Community, CDKL5, Gene Therapy, Rare Disease, Foundation, US, India"
        }
    ]
}
</script>
